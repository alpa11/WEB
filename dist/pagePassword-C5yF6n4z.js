const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./pageIm-yScSA0Mt.js","./index-CTd46-d9.js","./index-BeWLCHqW.css","./page-C1qLJvvz.js"])))=>i.map(i=>d[i]);
import{r as u,B as f,I as v,P as y,g as S,m as L,w as P,n as k,t as I,_,e as E,x}from"./index-CTd46-d9.js";import{p as M}from"./putPreloader-B9hRs7f6.js";import{P as N}from"./page-C1qLJvvz.js";import{L as A}from"./loginPage-BpEoSn3G.js";import{h as D}from"./htmlToSpan-DhAls8qz.js";let t;const T=()=>{const d=new A({className:"page-password",withInputWrapper:!0,titleLangKey:"Login.Password.Title",subtitleLangKey:"Login.Password.Subtitle"}),a=f("btn-primary btn-color-primary"),r=new v.IntlElement({key:"Login.Next"});a.append(r.element);const e=new y({label:"LoginPassword",name:"password"});t=e.input,d.inputWrapper.append(e.container,a);let l;const p=()=>(l||(l=window.setInterval(p,1e4)),u.managers.passwordManager.getState().then(n=>{s=n,s.hint?E(e.label,D(x(s.hint))):e.setLabel()}));let s;const c=n=>{if(n&&k(n),!t.value.length){t.classList.add("error");return}const h=I([t,a],!0),m=t.value;r.update({key:"PleaseWait"});const g=M(a);e.setValueSilently(""+Math.random()),e.setValueSilently(m),u.managers.passwordManager.check(m,s).then(i=>{switch(i._){case"auth.authorization":clearInterval(l),_(()=>import("./pageIm-yScSA0Mt.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(b=>{b.default.mount()}),o&&o.remove();break;default:a.removeAttribute("disabled"),r.update({key:i._}),g.remove();break}}).catch(i=>{switch(h(),e.input.classList.add("error"),i.type){default:r.update({key:"PASSWORD_HASH_INVALID"}),t.select();break}g.remove(),p()})};S(a,c),t.addEventListener("keypress",function(n){if(this.classList.remove("error"),r.update({key:"Login.Next"}),n.key==="Enter")return c()});const w=L.isMobile?100:166,o=new P(e,w);return d.imageDiv.append(o.container),Promise.all([o.load(),p()])},C=new N("page-password",!0,T,null,()=>{t.focus(),u.managers.appStateManager.pushToState("authState",{_:"authStatePassword"})});export{C as default};
//# sourceMappingURL=pagePassword-C5yF6n4z.js.map
